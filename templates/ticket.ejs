<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Parking Ticket</title>

  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    @media print {
      body {
        background: white !important;
      }

      .no-print {
        display: none !important;
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen flex flex-col items-center justify-center px-4">

  <!-- TICKET -->
  <div id="ticket"
    class="max-w-md w-full bg-white rounded-3xl shadow-2xl overflow-hidden">

    <!-- HEADER -->
    <div class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-center py-6">
      <h1 class="text-2xl font-bold tracking-wide">
        PARKING TICKET
      </h1>
      <p class="text-sm opacity-90 mt-1">
        Payment Successful
      </p>
    </div>

    <!-- BODY -->
    <div class="p-6">

      <p class="text-center text-gray-600 text-sm mb-6">
        Please keep this ticket for your parking reference.
      </p>

      <div class="border border-dashed rounded-xl p-5 space-y-4">

        <div class="flex justify-between">
          <span class="text-gray-500 text-sm">Payment ID</span>
          <span class="font-semibold text-gray-900 text-sm">
            <%= paymentId %>
          </span>
        </div>

        <div class="flex justify-between">
          <span class="text-gray-500 text-sm">Amount Paid</span>
          <span class="font-bold text-green-600 text-lg">
            $<%= amount %>
          </span>
        </div>

        <div class="flex justify-between">
          <span class="text-gray-500 text-sm">Status</span>
          <span
            class="px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold uppercase">
            <%= status %>
          </span>
        </div>

        <div class="flex justify-between">
          <span class="text-gray-500 text-sm">Time</span>
          <span class="font-medium text-gray-800 text-sm">
            <%= time %>
          </span>
        </div>

      </div>

      <!-- CONFIRMATION -->
      <div class="flex items-center justify-center gap-2 mt-6">
        <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-green-600 font-medium text-sm">
          Payment Confirmed
        </span>
      </div>

      <!-- FOOTER -->
      <div class="mt-6 text-center">
        <p class="text-gray-400 text-xs">
          Thank you for using our parking service ðŸš—
        </p>
      </div>

    </div>
  </div>

  <!-- ACTION BUTTONS -->
  <div class="mt-6 flex gap-3 no-print">

    <!-- PRINT -->
    <button onclick="window.print()"
      class="bg-indigo-600 text-white px-5 py-2 rounded-xl shadow hover:bg-indigo-700">
      Print / Save PDF
    </button>

    <!-- DOWNLOAD -->
    <button onclick="downloadPDF()"
      class="bg-green-600 text-white px-5 py-2 rounded-xl shadow hover:bg-green-700">
      Download PDF
    </button>

  </div>

  <!-- PDF LIBRARIES -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script>
    async function downloadPDF() {
      const { jsPDF } = window.jspdf;

      const element = document.getElementById("ticket");

      const canvas = await html2canvas(element, {
        scale: 2
      });

      const imgData = canvas.toDataURL("image/png");

      const pdf = new jsPDF({
        orientation: "portrait",
        unit: "px",
        format: "a4"
      });

      const imgWidth = 400;
      const imgHeight = (canvas.height * imgWidth) / canvas.width;

      pdf.addImage(imgData, "PNG", 20, 20, imgWidth, imgHeight);

      pdf.save("parking-ticket-<%= paymentId %>.pdf");
    }
  </script>

</body>

</html>